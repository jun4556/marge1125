# タスク完了時のチェックリスト

## コーディング完了後

### 1. コードの確認
- [ ] コーディング規約に従っているか確認
- [ ] 不要なコメントやデバッグコードを削除
- [ ] import文を整理（未使用のimportを削除）
- [ ] TODOコメントが適切に記述されているか確認

### 2. ビルド確認
```cmd
cd drawer
ant clean
ant build
```
- [ ] ビルドエラーがないことを確認
- [ ] 警告メッセージを確認（可能な限り解消）

### 3. コンパイルチェック
```cmd
cd drawer
ant javac
```
- [ ] Javaコンパイルが成功することを確認

### 4. GWTコンパイル確認（必要に応じて）
```cmd
cd drawer
ant gwtc
```
- [ ] JavaScriptへの変換が成功することを確認
- [ ] クライアント側コードを変更した場合は必須

## データベース変更がある場合

### 5. スキーマ変更の確認
- [ ] SQLファイルが正しく記述されているか確認
- [ ] データベースに適用して動作確認
```cmd
mysql -u root -p < api\operation_log.sql
```
- [ ] インデックスが適切に設定されているか確認
- [ ] 外部キー制約が正しいか確認

## WebSocket関連の変更がある場合

### 6. WebSocket動作確認
- [ ] Tomcat 8以降にデプロイ
- [ ] ブラウザで接続確認
- [ ] 複数クライアントでの同時接続テスト
- [ ] メッセージの送受信が正常に動作するか確認

## テスト（実装されている場合）

### 7. ユニットテストの実行
※ 現在JUnitテストは未実装
- [ ] テストが追加されている場合は実行
- [ ] 全てのテストが成功することを確認

### 8. 手動テスト
- [ ] 主要な機能が動作することを手動確認
- [ ] エラーケースの動作確認
- [ ] ブラウザの開発者ツールでエラーがないか確認

## ドキュメント

### 9. ドキュメントの更新
- [ ] 新機能を追加した場合、ドキュメントを更新
- [ ] READMEやマニュアルに反映（必要に応じて）
- [ ] コメントやJavadocが適切に記述されているか確認

## バージョン管理

### 10. Gitコミット
```cmd
git status
git add .
git commit -m "適切なコミットメッセージ"
```
- [ ] 変更内容を確認
- [ ] 意味のあるコミットメッセージを記述
- [ ] 必要に応じてプッシュ
```cmd
git push origin main
```

## デプロイ前確認

### 11. WARファイルの作成
```cmd
cd drawer
ant war
```
- [ ] `KIfU4.war` が正常に生成されることを確認
- [ ] WARファイルのサイズが異常でないか確認

### 12. デプロイ準備
- [ ] 必要なJARファイルが `drawer\war\WEB-INF\lib\` に配置されているか確認
  - diff-match-patch-1.2.jar
  - javax.websocket-api-1.1.jar
  - gson-2.8.9.jar
- [ ] データベース接続設定が正しいか確認
- [ ] 環境変数やプロパティファイルが適切に設定されているか確認

## OT実装特有の確認（OT関連の変更がある場合）

### 13. OT機能の確認
- [ ] `operation_log` テーブルが存在することを確認
- [ ] OperationManagerが正しく動作するか確認
- [ ] クライアント側でOT操作が送信されるか確認
- [ ] サーバー側で操作がトランスフォームされるか確認
- [ ] 複数ユーザーでの同時編集が正常に動作するか確認

### 14. ログ確認
- [ ] Tomcatログでエラーがないか確認
```cmd
type C:\path\to\tomcat\logs\catalina.out
```
- [ ] ブラウザのコンソールログを確認
- [ ] データベースの `operation_log` テーブルに正しく記録されているか確認

## 最終チェック

### 15. 統合チェックリスト参照
- [ ] `OT_Integration_Checklist.md` の該当項目を確認（OT関連の場合）
- [ ] トラブルシューティング項目で既知の問題がないか確認

### 16. クリーンアップ
- [ ] 一時ファイルを削除
- [ ] ビルド成果物を確認
- [ ] 不要なログファイルを削除

## タスク完了報告

### 17. 完了報告
- [ ] 変更内容を簡潔にまとめる
- [ ] 影響範囲を明確にする
- [ ] 既知の問題や今後の改善点があれば記載
- [ ] 必要に応じてドキュメントを更新

## 推奨事項
- 小さな変更でも必ずビルドを実行
- 複数の変更を含む場合は、段階的にコミット
- 他の開発者への影響を考慮
- 定期的にメインブランチと同期
